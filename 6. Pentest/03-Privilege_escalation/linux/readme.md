# Linux Privilege escalation 
Make the 3 rooms of tryhackme which are free: 

1. https://tryhackme.com/room/linprivesc
1. https://tryhackme.com/room/linuxprivesc
1. https://tryhackme.com/room/linuxprivescarena


Then do the following exercises:  
1. [Recon](./readme.md)
1. [Credentials Access](./CredentialsAccess.md)
1. [Missconfiguration](./Missconfiguration.md)
1. [Exploits](./Exploit.md)

## What is privilege escalation?
Most computer systems are designed to be used by multiple users. Privileges mean what a user is allowed to do. Common privileges include viewing and editing files or modifying system files. Elevation of privileges refers to when a user is given privileges to which they are not entitled. These privileges can be used to delete files, view private information or install unwanted programs such as viruses. This usually occurs when a system has a bug that allows security to be bypassed or, alternatively, has faulty design assumptions about how it will be used.

Elevation of privilege involves exploiting a bug, design flaw, or configuration error in an operating system or software application to gain privileged access to resources normally protected by an application or user. The result is an application with more privileges than intended by the developer or system administrator performing unauthorized actions.

While organizations are statistically likely to have more Windows clients, Linux elevation of privilege attacks are important threats to consider when reviewing an organization's information security posture. Consider that an organization's most critical infrastructure, such as web servers, databases, firewalls, etc., most likely run a Linux operating system. Compromising these critical devices can severely disrupt an organization's operations or even destroy them entirely. In addition, the Internet of Things (IoT) and embedded systems are becoming ubiquitous in the workplace, increasing the number of potential targets for malicious hackers. Given the prevalence of Linux devices in the workplace, it is critical that organizations harden and secure these devices.

## Recon
Once again, the first thing to do when you want to elevate your privilege is to proceed with a recognition step. 

Here are some questions you should ask yourself before undertaking elevation of privilege right. 

1. What is the username? 
1. What group do you have? 
1. What other users have?
1. What is the hostname ?
1. What is the kernel version?
1. What is the ip ?
1. What are the routes? 
1. What are the connections on a system?
1. Are there any rules for the firewall?
1. Are there any scheduled tasks?
1. What are the versions of the installed packages?
1. Which files and directories have write and read permissions?
1. Are there any hard drives or mounted directories?
1. Are there any kernel modules?
1. Is there a binary that can change the suid rights?


**Enumerating Users**  
What is the username? 
```bash
whoami
```
What group do you have? 
```bash
id
```
What other users have?
```bash
cat /etc/passwd
```

**Enumerating the Hostname**  
What is the hostname ?
````
hostname
````
**Enumerating the Operating System Version and Architecture**  
What is the kernel version?
````bash
cat /etc/issue
````
Or 
````bash
cat /etc/*-release
````
Or
````bash
uname -a
````

**Enumerating Networking Information**  
What is the ip ?
````bash
ip a
````
What are the routes? 
````bash
/sbin/route
````
What are the connections on a system?
(The ss command is a modern replacement for the classic netstat)
````bash
ss -anp
````

````bash
netstat -tupln
````

**Enumerating Firewall Status and Rules**  
Are there any rules for the firewall?
````bash
# Root only
iptables
````

````bash
cat /etc/iptables
````

**Enumerating Scheduled Tasks**  
Are there any scheduled tasks?
````bash
ls -lah /etc/cron*
````

````bash
cat /etc/crontab
````

**Enumerating Installed Applications and Patch Levels**  
What are the versions of the installed packages?
````bash
dpkg -l
````

**Enumerating Readable/Writable Files and Directories**  
Which files and directories have write and read permissions?
````bash
find / -writable -type d 2>/dev/null
````

**Enumerating Unmounted Disks**  
Are there any hard drives or mounted directories?
````bash
cat /etc/fstab
````

````bash
/bin/lsblk
````

**Enumerating Device Drivers and Kernel Modules**  
Are there any kernel modules?
````bash
lsmod
````
What are the drivers?
````bash
/sbin/modinfo libata
````

**Enumerating Binaries That AutoElevate**  
Is there a binary that can change the suid rights?
````bash
find / -perm -u=s -type f 2>/dev/null
````

